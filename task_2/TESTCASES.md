# Тест-кейсы для API микросервиса объявлений

## Информация о сервисе
**Host:** https://qa-internship.avito.com  
**Base URL:** https://qa-internship.avito.com/api/1  
**Описание:** Микросервис для работы с объявлениями. Позволяет создавать, получать объявления и статистику.

## Структура API

1. **POST /api/1/item** - Создание объявления
2. **GET /api/1/item/:id** - Получение объявления по идентификатору
3. **GET /api/1/:sellerID/item** - Получение всех объявлений по идентификатору продавца
4. **GET /api/1/statistic/:id** - Получение статистики по itemID

---

## Ручка 1: Создание объявления (POST /api/1/item)

### TC-001: Успешное создание объявления с валидными данными
**Приоритет:** High  
**Предусловия:** Нет  
**Шаги:**
1. Отправить POST запрос на `/api/1/item` с валидными данными:
   ```json
   {
     "sellerID": 123456,
     "name": "Тестовое объявление",
     "price": 5000,
     "statistics": {
       "contacts": 3,
       "likes": 10,
       "viewCount": 5
     }
   }
   ```

**Ожидаемый результат:**
- HTTP статус: 200 OK
- В ответе присутствует поле `status`
- Объявление успешно создано

---

### TC-002: Создание объявления с невалидным sellerID (меньше 111111)
**Приоритет:** Medium  
**Предусловия:** Нет  
**Шаги:**
1. Отправить POST запрос на `/api/1/item` с `sellerID` = 100000

**Ожидаемый результат:**
- HTTP статус: 400 Bad Request
- В ответе присутствует сообщение об ошибке валидации

---

### TC-003: Создание объявления с невалидным sellerID (больше 999999)
**Приоритет:** Medium  
**Предусловия:** Нет  
**Шаги:**
1. Отправить POST запрос на `/api/1/item` с `sellerID` = 1000000

**Ожидаемый результат:**
- HTTP статус: 400 Bad Request
- В ответе присутствует сообщение об ошибке валидации

---

### TC-004: Создание объявления без обязательного поля name
**Приоритет:** High  
**Предусловия:** Нет  
**Шаги:**
1. Отправить POST запрос на `/api/1/item` без поля `name`

**Ожидаемый результат:**
- HTTP статус: 400 Bad Request
- В ответе присутствует сообщение об отсутствии обязательного поля

---

### TC-005: Создание объявления с отрицательной ценой
**Приоритет:** Medium  
**Предусловия:** Нет  
**Шаги:**
1. Отправить POST запрос на `/api/1/item` с `price` = -100

**Ожидаемый результат:**
- HTTP статус: 400 Bad Request
- В ответе присутствует сообщение об ошибке валидации цены

---

### TC-006: Создание объявления с пустым name
**Приоритет:** Medium  
**Предусловия:** Нет  
**Шаги:**
1. Отправить POST запрос на `/api/1/item` с `name` = ""

**Ожидаемый результат:**
- HTTP статус: 400 Bad Request
- В ответе присутствует сообщение об ошибке валидации

---

### TC-007: Создание объявления с нулевой ценой
**Приоритет:** Medium  
**Предусловия:** Нет  
**Шаги:**
1. Отправить POST запрос на `/api/1/item` с `price` = 0

**Ожидаемый результат:**
- HTTP статус: 200 OK или 400 Bad Request (в зависимости от бизнес-логики)

---

### TC-008: Создание объявления без поля statistics
**Приоритет:** Low  
**Предусловия:** Нет  
**Шаги:**
1. Отправить POST запрос на `/api/1/item` без поля `statistics`

**Ожидаемый результат:**
- HTTP статус: 200 OK
- Объявление создано с дефолтными значениями статистики

---

### TC-009: Создание объявления с отрицательными значениями в statistics
**Приоритет:** Medium  
**Предусловия:** Нет  
**Шаги:**
1. Отправить POST запрос на `/api/1/item` с отрицательными значениями в `statistics`

**Ожидаемый результат:**
- HTTP статус: 400 Bad Request или 200 OK (в зависимости от валидации)

---

## Ручка 2: Получение объявления по идентификатору (GET /api/1/item/:id)

### TC-010: Успешное получение существующего объявления
**Приоритет:** High  
**Предусловия:** Создано объявление с известным `id`  
**Шаги:**
1. Отправить GET запрос на `/api/1/item/:id` с существующим `id`

**Ожидаемый результат:**
- HTTP статус: 200 OK
- В ответе присутствует массив объектов с полями: `id`, `sellerId`, `name`, `price`, `statistics`, `createdAt`
- Данные соответствуют созданному объявлению

---

### TC-011: Получение несуществующего объявления
**Приоритет:** High  
**Предусловия:** Нет  
**Шаги:**
1. Отправить GET запрос на `/api/1/item/:id` с несуществующим `id` (например, случайный UUID)

**Ожидаемый результат:**
- HTTP статус: 404 Not Found
- В ответе присутствует сообщение об отсутствии объявления

---

### TC-012: Получение объявления с невалидным форматом id
**Приоритет:** Medium  
**Предусловия:** Нет  
**Шаги:**
1. Отправить GET запрос на `/api/1/item/abc123` (не UUID формат)

**Ожидаемый результат:**
- HTTP статус: 400 Bad Request или 404 Not Found
- В ответе присутствует сообщение об ошибке валидации

---

### TC-013: Получение объявления с пустым id
**Приоритет:** Low  
**Предусловия:** Нет  
**Шаги:**
1. Отправить GET запрос на `/api/1/item/` (пустой id)

**Ожидаемый результат:**
- HTTP статус: 404 Not Found или 400 Bad Request

---

## Ручка 3: Получение всех объявлений по идентификатору продавца (GET /api/1/:sellerID/item)

### TC-014: Успешное получение объявлений существующего продавца
**Приоритет:** High  
**Предусловия:** Создано несколько объявлений с одним `sellerID`  
**Шаги:**
1. Отправить GET запрос на `/api/1/:sellerID/item` с существующим `sellerID`

**Ожидаемый результат:**
- HTTP статус: 200 OK
- В ответе присутствует массив объявлений
- Все объявления принадлежат указанному продавцу (`sellerId` соответствует `sellerID`)
- Количество объявлений соответствует созданным

---

### TC-015: Получение объявлений несуществующего продавца
**Приоритет:** Medium  
**Предусловия:** Нет  
**Шаги:**
1. Отправить GET запрос на `/api/1/:sellerID/item` с несуществующим `sellerID` (в диапазоне 111111-999999)

**Ожидаемый результат:**
- HTTP статус: 200 OK с пустым массивом `[]`
- В ответе пустой массив

---

### TC-016: Получение объявлений продавца с невалидным sellerID (меньше 111111)
**Приоритет:** Medium  
**Предусловия:** Нет  
**Шаги:**
1. Отправить GET запрос на `/api/1/100000/item` (вне диапазона)

**Ожидаемый результат:**
- HTTP статус: 400 Bad Request
- В ответе присутствует сообщение об ошибке валидации

---

### TC-017: Получение объявлений продавца с невалидным sellerID (больше 999999)
**Приоритет:** Medium  
**Предусловия:** Нет  
**Шаги:**
1. Отправить GET запрос на `/api/1/1000000/item` (вне диапазона)

**Ожидаемый результат:**
- HTTP статус: 400 Bad Request
- В ответе присутствует сообщение об ошибке валидации

---

### TC-018: Проверка уникальности id при получении объявлений продавца
**Приоритет:** High  
**Предусловия:** Создано несколько объявлений с одним `sellerID`  
**Шаги:**
1. Отправить GET запрос на `/api/1/:sellerID/item`
2. Проверить уникальность `id` в ответе

**Ожидаемый результат:**
- HTTP статус: 200 OK
- Все `id` в массиве уникальны
- Нет дубликатов объявлений

---

## Ручка 4: Получение статистики по itemID (GET /api/1/statistic/:id)

### TC-019: Успешное получение статистики существующего объявления
**Приоритет:** High  
**Предусловия:** Создано объявление с известным `id`  
**Шаги:**
1. Отправить GET запрос на `/api/1/statistic/:id` с существующим `id`

**Ожидаемый результат:**
- HTTP статус: 200 OK
- В ответе присутствует массив объектов со статистикой: `likes`, `viewCount`, `contacts`
- Данные статистики корректны и соответствуют созданному объявлению

---

### TC-020: Получение статистики несуществующего объявления
**Приоритет:** High  
**Предусловия:** Нет  
**Шаги:**
1. Отправить GET запрос на `/api/1/statistic/:id` с несуществующим `id`

**Ожидаемый результат:**
- HTTP статус: 404 Not Found
- В ответе присутствует сообщение об отсутствии объявления

---

### TC-021: Получение статистики с невалидным форматом id
**Приоритет:** Medium  
**Предусловия:** Нет  
**Шаги:**
1. Отправить GET запрос на `/api/1/statistic/abc123` (не UUID формат)

**Ожидаемый результат:**
- HTTP статус: 400 Bad Request или 404 Not Found
- В ответе присутствует сообщение об ошибке валидации

---

### TC-022: Проверка корректности данных статистики (счетчик просмотров)
**Приоритет:** High  
**Предусловия:** Создано объявление  
**Шаги:**
1. Создать объявление
2. Получить статистику несколько раз
3. Проверить изменение счетчика просмотров

**Ожидаемый результат:**
- HTTP статус: 200 OK
- Счетчик `viewCount` увеличивается при каждом запросе статистики
- Остальные счетчики не изменяются без соответствующих действий

---

## Интеграционные тест-кейсы

### TC-023: Полный цикл: создание -> получение -> статистика -> получение по sellerID
**Приоритет:** High  
**Предусловия:** Нет  
**Шаги:**
1. Создать объявление с уникальным `sellerID`
2. Получить объявление по `id` (из ответа создания или через GET)
3. Получить статистику по `id`
4. Получить все объявления продавца по `sellerID`

**Ожидаемый результат:**
- Все запросы выполняются успешно
- Данные согласованы между всеми ручками
- `id` и `sellerID` корректны во всех ответах
- Созданное объявление присутствует в списке объявлений продавца

---

### TC-024: Создание нескольких объявлений одним продавцом
**Приоритет:** High  
**Предусловия:** Нет  
**Шаги:**
1. Создать 3 объявления с одним `sellerID`
2. Получить все объявления продавца
3. Проверить количество и уникальность `id`

**Ожидаемый результат:**
- HTTP статус: 200 OK
- В ответе присутствуют все 3 объявления
- Все `id` уникальны
- Все объявления имеют одинаковый `sellerId`

---

### TC-025: Проверка уникальности id при создании
**Приоритет:** High  
**Предусловия:** Нет  
**Шаги:**
1. Создать несколько объявлений
2. Получить объявления по их `id`
3. Проверить уникальность `id` в ответах

**Ожидаемый результат:**
- Все `id` уникальны (UUID формат)
- Нет дубликатов

---

## Негативные тест-кейсы

### TC-026: Отправка запроса с некорректным HTTP методом
**Приоритет:** Low  
**Предусловия:** Нет  
**Шаги:**
1. Отправить PUT запрос на `/api/1/item` (если метод не поддерживается)

**Ожидаемый результат:**
- HTTP статус: 405 Method Not Allowed
- В ответе присутствует информация о поддерживаемых методах

---

### TC-027: Отправка запроса с некорректным Content-Type
**Приоритет:** Low  
**Предусловия:** Нет  
**Шаги:**
1. Отправить POST запрос на `/api/1/item` с `Content-Type: text/plain`

**Ожидаемый результат:**
- HTTP статус: 400 Bad Request или 415 Unsupported Media Type

---

### TC-028: Отправка запроса с некорректным JSON
**Приоритет:** Medium  
**Предусловия:** Нет  
**Шаги:**
1. Отправить POST запрос на `/api/1/item` с некорректным JSON в теле запроса

**Ожидаемый результат:**
- HTTP статус: 400 Bad Request
- В ответе присутствует сообщение об ошибке парсинга JSON

---

## Итоговая статистика
- **Всего тест-кейсов:** 28
- **High приоритет:** 13
- **Medium приоритет:** 11
- **Low приоритет:** 4

